:root {
  --bg-color: #f0f2f5; /* Light grayish-blue background */
  --text-color: #333333; /* Dark text */
  --primary-accent-color: #6a6aff; /* Existing button blue */
  --primary-accent-hover-color: #5050cc;
  --secondary-accent-color: #4a4a70; /* Menu bar background */
  --secondary-accent-hover-color: #303050; /* Menu bar border */
  --border-color: #cccccc;
  --input-bg-color: #ffffff;
  --input-border-color: #b0b0e0;
  --button-text-color: white;
  --note-item-border-color: #e0e0ff;
  --note-list-text-color: #404080;
  --note-folder-tag-bg-color: #e0e0ff;
  --note-folder-tag-text-color: #505080;
  --delete-btn-bg-color: #ff6666;
  --delete-btn-hover-bg-color: #cc0000;
  --delete-selected-btn-bg-color: #f0ad4e;
  --delete-selected-btn-hover-bg-color: #ec971f;
  --create-folder-btn-bg-color: #5cb85c;
  --create-folder-btn-hover-bg-color: #4cae4c;
  --expand-note-btn-bg-color: #7777cc;
  --expand-note-btn-hover-bg-color: #5050aa;
  --modal-bg-color: #fefefe;
  --modal-text-color: #333333;
  --modal-border-color: #888;
  --modal-close-btn-color: #aaa;
  --modal-close-btn-hover-color: black;
  --hr-color: #c0c0ff;
  --scrollbar-thumb-color: #c1c1c1;
  --scrollbar-track-color: #f1f1f1;

  /* Quill Specific - Light Theme */
  --quill-toolbar-bg: #f9f9f9;
  --quill-editor-bg: var(--input-bg-color);
  --quill-text-color: var(--text-color);
  --quill-border-color: var(--border-color);
  --quill-toolbar-button-stroke: #444; /* Default snow theme stroke */
  --quill-toolbar-button-fill: #444;   /* Default snow theme fill */
  --quill-toolbar-button-hover-bg: #efefef;
  --quill-toolbar-button-active-bg: #e0e0e0;
}

body.dark-mode {
  --bg-color: #2c2f33; /* Dark background */
  --text-color: #e0e0e0; /* Light text */
  --primary-accent-color: #7a7aff; /* Slightly lighter blue for dark mode */
  --primary-accent-hover-color: #6060dd;
  --secondary-accent-color: #3a3a5a; /* Darker menu bar */
  --secondary-accent-hover-color: #202040;
  --border-color: #555555;
  --input-bg-color: #383c42;
  --input-border-color: #7a7aff;
  --button-text-color: white;
  --note-item-border-color: #444448;
  --note-list-text-color: #c0c0e0;
  --note-folder-tag-bg-color: #4f4f70;
  --note-folder-tag-text-color: #d0d0f0;
  --delete-btn-bg-color: #d9534f;
  --delete-btn-hover-bg-color: #c9302c;
  --delete-selected-btn-bg-color: #eea236;
  --delete-selected-btn-hover-bg-color: #d58512;
  --create-folder-btn-bg-color: #4cae4c;
  --create-folder-btn-hover-bg-color: #398439;
  --expand-note-btn-bg-color: #6767bb;
  --expand-note-btn-hover-bg-color: #40409a;
  --modal-bg-color: #3a3a3a;
  --modal-text-color: #e0e0e0;
  --modal-border-color: #666;
  --modal-close-btn-color: #ccc;
  --modal-close-btn-hover-color: white;
  --hr-color: #555555;
  --scrollbar-thumb-color: #555;
  --scrollbar-track-color: #333;

  /* Quill Specific - Dark Theme */
  --quill-toolbar-bg: #383c42;
  --quill-editor-bg: var(--input-bg-color);
  --quill-text-color: var(--text-color);
  --quill-border-color: var(--border-color);
  --quill-toolbar-button-stroke: var(--text-color);
  --quill-toolbar-button-fill: var(--text-color);
  --quill-toolbar-button-hover-bg: #4f4f70;
  --quill-toolbar-button-active-bg: #5a5a80;
}


body{
    margin: 0px;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    min-width: 400px;
    background: var(--bg-color); /* Using gradient from before, will replace with simple color */
    color: var(--text-color);
    transition: background-color 0.3s, color 0.3s; /* Smooth theme transition */
}

/* Styles for the new Menu Bar */
#menu-bar {
  background-color: var(--secondary-accent-color);
  padding: 8px 10px;
  border-bottom: 1px solid var(--secondary-accent-hover-color);
  margin-bottom: 15px; 
  display: flex; 
  align-items: center;
}

.menu-button { 
  background-color: var(--primary-accent-color);
  border: 1px solid var(--primary-accent-hover-color);
  color: var(--button-text-color);
  padding: 5px 10px;
  border-radius: 4px;
  cursor: pointer;
  font-size: 14px;
  margin-right: 10px; 
  transition: background-color 0.3s ease;
}

.menu-button:hover {
  background-color: var(--primary-accent-hover-color);
}

/* Padding for the main content area */
.main-content-area {
    padding: 15px;
    background-color: var(--bg-color); /* Ensure this area also follows theme */
}

/* Search Bar Styling */
#search-container {
    margin-bottom: 15px; 
}

#search-bar {
    width: 100%; 
    padding: 8px 10px;
    border: 1px solid var(--input-border-color);
    background-color: var(--input-bg-color);
    color: var(--text-color);
    border-radius: 5px; 
    box-sizing: border-box; 
    font-size: 15px;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
}

/* Minor adjustments for existing elements for consistency */
hr {
    margin-top: 15px; 
    margin-bottom: 15px;
    border: 0;
    height: 1px;
    background-color: var(--hr-color);
}

#settings-section, #folder-management, #note-title, #action-buttons, #store {
    margin-bottom: 15px; /* Standard bottom margin for sections */
}
#editor-container { /* Combined with note-title's old margin */
    margin-bottom: 15px;
}


/* General button styles - will be overridden by specific button styles if needed */
button{
    margin: 8px 2px; 
    background-color: var(--primary-accent-color);
    border-radius: 5px; 
    border: none; 
    font-size: 16px; 
    font-weight: bold;
    color: var(--button-text-color);
    padding: 10px 15px; 
    cursor: pointer; 
    transition: background-color 0.3s ease; 
}

button:hover {
    background-color: var(--primary-accent-hover-color);
}

input[type="text"] { /* Note: textarea is removed */
    width: 100%;
    padding: 12px;
    box-sizing: border-box;
    border: 1px solid var(--input-border-color);
    background-color: var(--input-bg-color);
    color: var(--text-color);
    border-radius: 5px;
    margin-bottom: 10px; 
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    font-size: 14px;
}

/* Quill Editor Container */
#editor-container {
  min-height: 150px; 
  border: 1px solid var(--quill-border-color);
  border-radius: 4px;
  /* margin-bottom already set with other sections */
  background-color: var(--quill-editor-bg); /* Use specific quill var */
}

.ql-editor { 
    min-height: 150px; 
    font-size: 14px; 
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
    padding: 10px; 
    color: var(--quill-text-color);
    background-color: var(--quill-editor-bg);
}

.ql-toolbar.ql-snow { 
    border-top-left-radius: 4px;
    border-top-right-radius: 4px;
    border-bottom: 1px solid var(--quill-border-color);
    background-color: var(--quill-toolbar-bg);
}
/* Quill SVG Icons theming */
body.dark-mode .ql-snow .ql-stroke { stroke: var(--quill-toolbar-button-stroke); }
body.dark-mode .ql-snow .ql-fill { fill: var(--quill-toolbar-button-fill); }
body.dark-mode .ql-snow .ql-picker-label { color: var(--quill-toolbar-button-stroke); }
body.dark-mode .ql-snow .ql-picker-options { background-color: var(--quill-toolbar-bg); border-color: var(--quill-border-color); }
body.dark-mode .ql-snow .ql-picker-item:hover { background-color: var(--quill-toolbar-button-hover-bg); }
body.dark-mode .ql-snow .ql-picker-item.ql-selected { background-color: var(--quill-toolbar-button-active-bg); }
body.dark-mode .ql-snow button:hover, 
body.dark-mode .ql-snow button:focus, 
body.dark-mode .ql-snow button.ql-active,
body.dark-mode .ql-snow .ql-picker-label:hover,
body.dark-mode .ql-snow .ql-picker-label.ql-active,
body.dark-mode .ql-snow .ql-picker-item:hover {
  /* Assuming .ql-stroke is the primary color of icons */
}
body.dark-mode .ql-snow button:hover .ql-stroke,
body.dark-mode .ql-snow button:focus .ql-stroke,
body.dark-mode .ql-snow button.ql-active .ql-stroke,
body.dark-mode .ql-snow .ql-picker-label:hover .ql-stroke,
body.dark-mode .ql-snow .ql-picker-label.ql-active .ql-stroke,
body.dark-mode .ql-snow .ql-picker-item:hover .ql-stroke,
body.dark-mode .ql-snow .ql-picker-item.ql-selected .ql-stroke {
    stroke: var(--primary-accent-color); /* Or a brighter icon color for dark mode */
}
body.dark-mode .ql-snow button:hover .ql-fill,
body.dark-mode .ql-snow button:focus .ql-fill,
body.dark-mode .ql-snow button.ql-active .ql-fill,
body.dark-mode .ql-snow .ql-picker-label:hover .ql-fill,
body.dark-mode .ql-snow .ql-picker-label.ql-active .ql-fill,
body.dark-mode .ql-snow .ql-picker-item:hover .ql-fill,
body.dark-mode .ql-snow .ql-picker-item.ql-selected .ql-fill {
    fill: var(--primary-accent-color); /* Or a brighter icon color for dark mode */
}

#store{
    color: var(--note-list-text-color);
    font-size: 15px;
    font-weight: normal; 
    padding-left: 5px; 
}

ul{
    list-style-type: none;
    margin: 10px 0 0 0; 
    padding: 0px;
}

li{
    padding: 10px 5px; 
    border-bottom: 1px solid var(--note-item-border-color);
    display: flex;
    align-items: center;
    word-wrap: break-word; 
    overflow-wrap: break-word; 
}

li:last-child {
    border-bottom: none; 
}

.note-checkbox {
    margin-right: 10px; 
    flex-shrink: 0; 
}
body.dark-mode .note-checkbox { /* Basic dark mode for checkbox */
    accent-color: var(--primary-accent-color);
}


.note-text-content {
    flex-grow: 1;
    white-space: pre-wrap; 
    word-break: break-word;
    color: var(--text-color); /* Ensure note text content follows theme */
}
.note-text-content a {
    color: var(--primary-accent-color); /* Link color */
}
body.dark-mode .note-text-content a {
    color: var(--primary-accent-color); /* Ensure links are visible in dark mode */
}


#action-buttons button { 
    margin: 5px; 
}

#delete-selected-notes-btn {
    background-color: var(--delete-selected-btn-bg-color);
}
#delete-selected-notes-btn:hover {
    background-color: var(--delete-selected-btn-hover-bg-color);
}


.delete-btn {
    background-color: var(--delete-btn-bg-color);
    color: var(--button-text-color);
    padding: 5px 10px;
    font-size: 12px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    margin-left: auto; 
    flex-shrink: 0; 
    transition: background-color 0.3s ease;
}

.delete-btn:hover {
    background-color: var(--delete-btn-hover-bg-color);
}

/* Folder Management Section */
#folder-management {
    display: flex;
    align-items: center;
    gap: 10px; 
    /* margin-bottom is already set with other sections */
}

#folder-select, #new-folder-name  { /* Grouped common styles */
    padding: 8px;
    border: 1px solid var(--input-border-color);
    background-color: var(--input-bg-color);
    color: var(--text-color);
    border-radius: 5px;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    font-size: 14px;
}
#folder-select { flex-grow: 1; }
#new-folder-name { 
    width: auto; 
    flex-grow: 2; 
    margin-bottom: 0; /* Overrides general input margin-bottom */
}


#create-folder-btn {
    padding: 8px 12px; 
    font-size: 14px; 
    margin: 0; 
    background-color: var(--create-folder-btn-bg-color);
}
#create-folder-btn:hover {
    background-color: var(--create-folder-btn-hover-bg-color);
}

/* Note Folder Tag Styling */
.note-folder-tag {
    background-color: var(--note-folder-tag-bg-color);
    color: var(--note-folder-tag-text-color);
    padding: 2px 6px;
    border-radius: 4px;
    font-size: 11px;
    margin-right: 5px;
    display: inline-block; 
}

/* Modal Styles */
.modal {
    display: none; 
    position: fixed; 
    z-index: 100; 
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    overflow: auto; 
    background-color: rgba(0,0,0,0.6); /* This is a backdrop, might not need theme variable */
}

.modal-content {
    background-color: var(--modal-bg-color);
    margin: 10% auto; 
    padding: 20px;
    border: 1px solid var(--modal-border-color);
    width: 80%;
    max-width: 500px;
    border-radius: 5px;
    position: relative;
    box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2),0 6px 20px 0 rgba(0,0,0,0.19);
}

.modal-close-btn {
    color: var(--modal-close-btn-color);
    float: right;
    font-size: 28px;
    font-weight: bold;
    cursor: pointer;
}

.modal-close-btn:hover,
.modal-close-btn:focus {
    color: var(--modal-close-btn-hover-color);
    text-decoration: none;
    cursor: pointer;
}

#modal-note-title {
    margin-top: 0; 
    margin-bottom: 15px;
    font-size: 20px;
    color: var(--modal-text-color);
}

#modal-note-content {
    white-space: pre-wrap; 
    word-wrap: break-word; 
    font-size: 15px;
    line-height: 1.6;
    color: var(--modal-text-color);
    max-height: 60vh; 
    overflow-y: auto; 
}
#modal-note-content a {
    color: var(--primary-accent-color); /* Ensure links in modal are themed */
}


/* Expand Note Button Styling */
.expand-note-btn {
    background-color: var(--expand-note-btn-bg-color);
    color: var(--button-text-color);
    padding: 3px 8px;
    font-size: 11px;
    border: none;
    border-radius: 3px;
    cursor: pointer;
    margin-left: 5px; 
    margin-top: 0; 
    margin-bottom: 0;
}

.expand-note-btn:hover {
    background-color: var(--expand-note-btn-hover-bg-color);
}

/* Custom Scrollbar for Webkit browsers */
::-webkit-scrollbar {
  width: 8px;
}
::-webkit-scrollbar-track {
  background: var(--scrollbar-track-color);
}
::-webkit-scrollbar-thumb {
  background: var(--scrollbar-thumb-color);
  border-radius: 4px;
}
::-webkit-scrollbar-thumb:hover {
  background: #a0a0a0; /* Slightly darker on hover */
}
body.dark-mode ::-webkit-scrollbar-thumb:hover {
    background: #6a6a6a; 
}